
#include "stdint.h"
#include "libswd.h"

#define STM32L0_FLASH_ACR_ADDR      0x40022000
#define STM32L0_FLASH_PECR_ADDR     0x40022004
#define STM32L0_FLASH_PDKEYR_ADDR   0x40022008
#define STM32L0_FLASH_PEKEYR_ADDR   0x4002200C
#define STM32L0_FLASH_PRGKEYR_ADDR  0x40022010
#define STM32L0_FLASH_OPTKEYR_ADDR  0x40022014
#define STM32L0_FLASH_SR_ADDR       0x40022018
#define STM32L0_FLASH_OPTR_ADDR     0x4002201C
#define STM32L0_FLASH_WRPROT1_ADDR  0x40022020
#define STM32L0_FLASH_WRPROT2_ADDR  0x40022024


#define STM32L0_FLASH_SR_BSY            0x00000001
#define STM32L0_FLASH_SR_EOP            0x00000002
#define STM32L0_FLASH_PECR_ERASE        0x00000200
#define STM32L0_FLASH_PECR_OBL_LAUNCH   0x00040000
#define STM32L0_FLASH_PECR_PELOCK       0x00000001
#define STM32L0_FLASH_PECR_OPTLOCK      0x00000004
#define STM32L0_FLASH_PECR_PROG         0x00000008
#define STM32L0_FLASH_PECR_FPRG         0x00000400
#define STM32L0_FLASH_PECR_PRGLOCK      0x00000002


#define STM32L0_FLASH_PEKEYR_KEY1       0x89ABCDEF 
#define STM32L0_FLASH_PEKEYR_KEY2       0x02030405

#define STM32L0_FLASH_PRGKEYR_KEY1       0x8C9DAEBF 
#define STM32L0_FLASH_PRGKEYR_KEY2       0x13141516

#define STM32L0_FLASH_OPTKEYR_KEY1       0xFBEAD9C8 
#define STM32L0_FLASH_OPTKEYR_KEY2       0x24252627



int32_t STM32L0_mass_erase(libswd_ctx_t *libswdctx);


int32_t STM32L0_main(void);



